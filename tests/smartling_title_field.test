<?php

/**
 * @file
 * Tests for smartling.
 */

/**
 * SmartlingTitleFieldTest.
 */
class SmartlingTitleFieldTest extends SmartlingWebTestCase {
  /**
   * Test info.
   *
   * @return array
   *   Return test info.
   */
  public static function getInfo() {
    return array(
      'name' => 'Content - Process title field',
      'description' => 'Test translate title fields.',
      'group' => 'Smartling',
    );
  }

  /**
   * TestCorrectTitlePropertyWithEntitiesMethod.
   */
  public function testCorrectTitlePropertyWithEntitiesMethod() {
    // Add demo content.
    module_enable(array('smartling_demo_content'));
    $this->smartlingTitleFieldsSetUpTest(2, 'title_property_field');

    $this->drupalGet('node/1');
    $this->drupalGet('node/9');

    $original = node_load(1);
    $translate_ru = node_load(9);
    // Check.
    $this->assertTrue(($original->title != $translate_ru->title), t('Original title != translated title for RU'), t('Browser'));
  }

  /**
   * TestCorrectTitleFieldWithEntitiesMethod.
   */
  public function testCorrectTitleFieldWithEntitiesMethod() {
    // Add demo content.
    module_enable(array('smartling_demo_content'));
    // Replace title.
    $this->smartlingTitleModuleReplaceNode('article', 'title');
    $this->smartlingTitleFieldsSetUpTest(2, 'title_field');

    $this->drupalGet('node/1');
    $this->drupalGet('node/9');

    $original = node_load(1, NULL, TRUE);
    $translate_ru = node_load(9, NULL, TRUE);

    // Check.
    $this->assertTrue(($original->title_field['en'][0]['value'] != $translate_ru->title_field['ru'][0]['value']), t('Original title != translated title for RU'), t('Browser'));
  }

  /**
   * TestCorrectTitleFieldWithFieldsMethod.
   */
  public function testCorrectTitleFieldWithFieldsMethod() {
    // Add demo content.
    module_enable(array('smartling_demo_content'));
    // Replace title.
    $this->smartlingTitleModuleReplaceNode('article', 'title');
    $this->smartlingTitleFieldsSetUpTest(1, 'title_field');

    $node = node_load(1, NULL, TRUE);

    // Check.
    $this->assertTrue(($node->title_field['en'][0]['value'] != $node->title_field['ru'][0]['value']), t('Original title != translated title for RU'), t('Browser'));
  }

}
